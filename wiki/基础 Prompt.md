# 基础 Prompting  
   
在上一篇指南中，我们介绍了 Prompt 并给出了一个基础示例。  
   
在本指南中，我们将提供更多关于如何使用 Prompts 的示例，并介绍一些对后续高级指南非常重要的关键概念。  
   
通常，通过示例学习概念是最好的方式。下面我们将介绍一些精心设计的 Prompts 如何用于执行各种有趣且不同的任务。  
   
主题：  
- [文本摘要](#文本摘要)  
- [信息提取](#信息提取)  
- [问答](#问答)  
- [文本分类](#文本分类)  
- [对话](#对话)  
- [代码生成](#代码生成)  
- [推理](#推理)  
- [Python 笔记本](#python-笔记本)  
   
---  
   
## 文本摘要  
自然语言生成中的一个标准任务是文本摘要。文本摘要可以包括许多不同的风格和领域。语言模型最有前景的应用之一是能够将文章和概念总结为快速易读的摘要。让我们尝试使用 Prompts 进行基础的摘要任务。  
   
假设我对抗生素感兴趣，我可以尝试这样的 Prompt：  
   
*Prompt:*  
```  
解释抗生素  
   
A:  
```  
   
*Output:*  
```  
抗生素是用来治疗细菌感染的一种药物。它们通过杀死细菌或阻止它们繁殖来发挥作用，从而让身体的免疫系统消灭感染。抗生素通常以药丸、胶囊或液体溶液的形式口服，有时也通过静脉注射给药。它们对病毒感染无效，不当使用可能导致抗生素耐药性。  
```  
   
"A:" 是问答中使用的明确的 Prompt 格式。我在这里使用它是为了告诉模型有一个预期的继续。在这个例子中，它是否有用与不使用它相比并不清楚，但我们将在后面的示例中留下这个问题。让我们假设这是太多信息，并希望进一步总结。我们可以指示模型将其总结为一句话，如下所示：  
   
*Prompt:*  
```  
抗生素是用来治疗细菌感染的一种药物。它们通过杀死细菌或阻止它们繁殖来发挥作用，从而让身体的免疫系统消灭感染。抗生素通常以药丸、胶囊或液体溶液的形式口服，有时也通过静脉注射给药。它们对病毒感染无效，不当使用可能导致抗生素耐药性。  
   
用一句话解释以上内容：  
```  
   
*Output:*  
```  
抗生素是用来治疗细菌感染的药物，它们通过杀死细菌或阻止它们繁殖，但对病毒无效，过度使用可能导致抗生素耐药性。  
```  
   
不过多关注上述输出的准确性——这是我们将在后续指南中讨论的问题——模型尝试用一句话总结段落。你可以用聪明的指令，但我们将在后续章节中讨论。请随时暂停在这里并尝试，看看是否能获得更好的结果。  
   
---  
## 信息提取  
虽然语言模型被训练用于执行自然语言生成和相关任务，但它也非常有能力执行分类和一系列其他自然语言处理（NLP）任务。  
   
这里是一个从给定段落中提取信息的 Prompt 示例。  
   
*Prompt:*  
```  
研究论文中的作者贡献声明和致谢应该清楚且具体地说明作者在准备手稿和分析中是否以及在多大程度上使用了诸如 ChatGPT 之类的 AI 技术。他们还应该指出使用了哪些 LLMs。这将提醒编辑和审稿人更仔细地审查手稿，以便寻找潜在的偏见、不准确性和不当的来源归属。同样，科学期刊应该对他们使用 LLMs 的情况保持透明，例如在选择提交的手稿时。  
   
提及上面段落中提到的基于大型语言模型的产品：  
```  
   
*Output:*  
```  
上面段落中提到的基于大型语言模型的产品是 ChatGPT。  
```  
   
我们可以有很多方法来改进上述结果，但这已经非常有用。  
   
到目前为止，你应该明白你可以通过简单地指示模型做什么来要求模型执行不同的任务。这是 AI 产品构建者已经在使用的强大能力，用来构建强大的产品和体验。  
   
段落来源：[ChatGPT: 五个研究的优先事项](https://www.nature.com/articles/d41586-023-00288-7)  
   
---  
## 问答  
   
要让模型响应具体答案的最佳方式之一是改进 Prompt 的格式。如之前所述，一个 Prompt 可以结合指令、上下文、输入和输出指示符以获得更好的结果。虽然这些组件不是必需的，但随着你对指令越具体，你将获得更好的结果，这就成为了一种好习惯。下面是一个例子，展示了一个更结构化的 Prompt 是什么样子。  
   
*Prompt:*  
```  
根据下面的上下文回答问题。保持答案简短。如果不确定答案，请回答“不确定答案”。  
   
上下文：Teplizumab 追溯其来源于一个名为 Ortho Pharmaceutical 的新泽西药品公司。在那里，科学家生成了一种早期版本的抗体，被称为 OKT3。最初源自老鼠，这种分子能够结合到 T 细胞的表面并限制它们的细胞杀伤潜力。在 1986 年，它被批准用于帮助预防肾脏移植后的器官排斥，成为首个获准用于人类的治疗性抗体。  
   
问题：OKT3 最初是从什么来源得到的？  
   
答案：  
```  
   
*Output:*  
```  
老鼠。  
```  
   
上下文来自 [自然](https://www.nature.com/articles/d41586-023-00400-x)。  
   
---  
   
## 文本分类  
到目前为止，我们使用了简单的指令来执行任务。作为一个 Prompt 工程师，你将需要更好地提供更好的指令。但这还不是全部！你还会发现，对于更难的用例，仅仅提供指令是不够的。这时你需要更多地考虑上下文和你可以在 Prompt 中使用的不同元素。你可以提供的其他元素是 `input data` 或 `examples`。  
   
让我们通过提供一个文本分类的示例来演示这一点。  
   
*Prompt:*  
```  
将文本分类为中性、负面或正面。  
   
文本：我认为食物还可以。  
情感：  
```  
   
*Output:*  
```  
中性  
```  
   
我们给出了对文本进行分类的指令，模型以 `'中性'` 响应，这是正确的。这没什么问题，但假设我们真正需要的是让模型以我们想要的确切格式给出标签。所以我们希望它返回 `neutral` 而不是 `Neutral`。我们如何实现这一点。有不同的方法可以做到这一点。我们在这里关心的是具体性，所以我们可以提供给 Prompt 的信息越多，结果越好。我们可以尝试提供示例来指定正确的行为。让我们再试一次：  
   
*Prompt:*  
```  
将文本分类为中性、负面或正面。  
   
文本：我认为假期还可以。  
情感：neutral  
   
文本：我认为食物还可以。  
情感：  
```  
   
*Output:*  
```  
neutral  
```  
   
完美！这次模型返回了 `neutral`，这是我正在寻找的特定标签。看来在 Prompt 中提供的示例帮助模型在输出中具体化了。为了强调有时为什么具体化很重要，请查看此示例并发现问题：  
   
*Prompt:*  
```  
将文本分类为 nutral、负面或正面。  
   
文本：我认为假期还可以。  
情感：  
```  
   
*Output:*  
```  
中性  
```  
   
这里有什么问题？  
   
---  
   
## 对话  
也许你可以通过 Prompt 工程实现的更有趣的事情之一是指导 LLM 系统如何行为，其意图和身份。这在你构建像客户服务聊天机器人这样的对话系统时特别有用。  
   
例如，让我们创建一个能够对问题生成更技术性和科学性回答的对话系统。注意我们是如何通过指令明确告诉它如何行为的。这有时被称为 *角色提示*。  
   
*Prompt:*  
```  
以下是与 AI 研究助理的对话。助理的语调是技术性和科学性的。  
   
人类：你好，你是谁？  
AI：问候！我是一个 AI 研究助理。今天我能帮你什么？  
人类：你能告诉我黑洞是如何形成的吗？  
AI：  
```  
   
*Output:*  
```  
当然！黑洞是时空中的区域，其中的引力如此之强，以至于没有任何东西，甚至光也不能逃脱。它们是在一个非常巨大的恒星死亡并且其核心坍塌成为自身时形成的，形成了无限密度的奇点。奇点的强大引力吸引了周围的所有物质和辐射，形成了黑洞。  
```  
   
我们的 AI 研究助理听起来有点太技术性了，对吧？好吧，让我们改变这种行为并指导系统给出更易于理解的答案。  
   
*Prompt:*  
```  
以下是与 AI 研究助理的对话。助理的回答即使是小学生也能理解。  
   
人类：你好，你是谁？  
AI：问候！我是一个 AI 研究助理。今天我能帮你什么？  
人类：你能告诉我黑洞是如何形成的吗？  
AI：  
```  
   
*Output:*  
```  
当然！黑洞是在一个非常巨大的恒星用完燃料并坍塌成为自身时形成的。恒星的引力如此之强，以至于没有任何东西，甚至光也不能逃脱它的牵引。这在时空中创造了一个拥有强烈引力的点，称为黑洞。  
```  
   
我认为我们取得了一些进展。你可以继续改进它。我相信如果你添加更多示例，你可能会得到更好的结果。  
   
---  
   
## 代码生成  
LLMs 在代码生成方面非常有效的一个应用是 Copilot。有大量你可以通过聪明的 Prompts 执行的代码生成任务。让我们看几个示例。  
   
首先，让我们尝试一个简单的问候用户的程序。  
   
*Prompt:*  
```  
/*  
询问用户的名字并说“你好”  
*/  
```  
   
*Output:*  
```  
let name = prompt("你的名字是什么？");  
console.log(`你好，${name}！`);  
```  
   
你可以看到我们甚至不需要指定使用的语言。  
   
让我们稍微切换一下水平。我想向你展示 LLMs 可以有多强大，只需要在设计 Prompts 上多一点努力。  
   
*Prompt:*  
```  
"""  
表 departments，列 = [DepartmentId, DepartmentName]  
表 students，列 = [DepartmentId, StudentId, StudentName]  
为计算机科学系的所有学生创建一个 MySQL 查询  
"""  
```  
   
*Output:*  
```  
SELECT StudentId, StudentName   
FROM students   
WHERE DepartmentId IN (SELECT DepartmentId FROM departments WHERE DepartmentName = 'Computer Science');  
```  
   
这非常令人印象深刻。在这种情况下，我们提供了有关数据库架构的数据，并要求它生成有效的 MySQL 查询。  
   
---  
   
## 推理  
也许对 LLM 今天来说最困难的任务之一需要某种形式的推理。推理是我最兴奋的领域之一，因为可以从 LLMs 中产生各种复杂的应用。  
   
在涉及数学能力的任务上已经有所改进。尽管如此，重要的是要注意当前的 LLMs 在执行推理任务时存在困难，因此这需要更高级的 Prompt 工程技术。我们将在下一篇指南中介绍这些高级技术。目前，我们将介绍一些基本示例，以展示算术能力。  
   
*Prompt:*  
```  
9000 * 9000 是多少？  
```  
   
*Output:*  
```  
81,000,000  
```  
   
让我们尝试一些更难的东西。  
   
*Prompt:*  
```  
这组中的奇数加起来是一个偶数：15、32、5、13、82、7、1。  
   
A：  
```  
   
*Output*  
```  
不，这组中的奇数加起来是一个奇数：119。  
```  
   
那是不正确的！让我们尝试通过改进 Prompt 来改善这一点。  
   
*Prompt:*  
```  
这组中的奇数加起来是一个偶数：15、32、5、13、82、7、1。  
   
通过将问题分解成步骤来解决。首先，确定奇数，将它们相加，并指出结果是奇数还是偶数。  
```  
   
*Output:*  
```  
奇数：15、5、13、7、1  
总和：41  
41 是一个奇数。  
```  
   
好多了，对吧？顺便说一下，我尝试了几次，系统有时会失败。如果你提供更好的指令并结合示例，它可能有助于获得更准确的结果。  
   
我们将继续在本节指南中包括更多常见应用的示例。  
   
在即将到来的指南中，我们将介绍更多高级的 Prompt 工程概念，以改善所有这些和更困难任务的性能。  
   
---  
## Python 笔记本  
   
|描述|笔记本|  
|--|--|  
|学习如何使用 `openai` 和 `LangChain` 库执行许多不同类型的常见任务|[Prompt 工程入门](../notebooks/pe-lecture.ipynb)|  
   
---  
   
[上一节 (Prompts 简介)](./Prompt&ensp;工程简介.md)  
   
[下一节 (高级 Prompting 技巧)](./高级&ensp;Prompt.md)